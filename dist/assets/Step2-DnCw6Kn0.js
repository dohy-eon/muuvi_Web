import{o as g,l as w,j as e}from"./index-C1c4KTub.js";import{a as h,u as N}from"./react-vendor-BCvJ4SZV.js";import{b as f,a as k}from"./recoil-vendor-BPQO4bvt.js";import{s as C}from"./profile-BlIvljn3.js";import{C as S}from"./check-DFrIQ6KT.js";import"./supabase-vendor-DMkEyeru.js";const D={ko:{titleWithGenre:a=>`'${a}' 장르 중에서
추천드릴까요?`,titleDefault:`오늘은 어떤 영상으로
추천드릴까요?`,subtitle:"* 최대 2개까지 선택할 수 있어요!",incompatibleMood:a=>`'${a}' 장르와 조합하기 어려운 무드입니다.`,prev:"이전",saving:"저장 중...",complete:"완료"},en:{titleWithGenre:a=>`What should we recommend
from '${a}' genre?`,titleDefault:`What should we
recommend today?`,subtitle:"* You can select up to 2!",incompatibleMood:a=>`This mood is difficult to combine with '${a}' genre.`,prev:"Previous",saving:"Saving...",complete:"Complete"}},G=[{id:"01",number:"01",english:"Romance",korean:"로맨스",gradient:"from-red-100 via-orange-100 to-pink-200"},{id:"02",number:"02",english:"Horror",korean:"호러",gradient:"from-gray-900 via-gray-500 to-red-500"},{id:"03",number:"03",english:"Comedy",korean:"코미디",gradient:"from-amber-300 via-amber-100 to-amber-300"},{id:"04",number:"04",english:"SF",korean:"공상 과학",gradient:"from-gray-900 via-slate-800 to-cyan-900"},{id:"05",number:"05",english:"Fantasy",korean:"판타지",gradient:"from-fuchsia-950 via-purple-500 to-violet-200"},{id:"06",number:"06",english:"Adventure",korean:"어드벤처",gradient:"from-orange-300 via-red-400 to-yellow-300"},{id:"07",number:"07",english:"Action",korean:"액션",gradient:"from-stone-900 via-stone-600 to-red-600"},{id:"08",number:"08",english:"Healing",korean:"힐링",gradient:"from-gray-300 via-lime-100 to-green-300"},{id:"09",number:"09",english:"Mystery",korean:"미스테리",gradient:"from-slate-800 via-gray-400 to-gray-500"}],I={};function T(){const[a,x]=h.useState([]),[l,c]=h.useState(!1),m=N(),r=f(g),b=k(g),d=f(w),o=D[d],n=r==null?void 0:r.genre,u=(n?I[n]:[])||[],p=t=>{if(u.includes(t)&&n){alert(o.incompatibleMood(n));return}x(s=>s.includes(t)?s.filter(j=>j!==t):s.length<2?[...s,t]:s)},v=()=>{m("/onboarding")},y=async()=>{if(!(!r||a.length===0)){c(!0);try{const t={...r,moods:a};b(t),await C("temp-user-id",t),sessionStorage.setItem("prevPath","/onboarding/step2"),m("/main")}catch(t){console.error("온보딩 완료 처리 중 오류:",t)}finally{c(!1)}}};return e.jsxs("div",{className:"w-full min-h-screen bg-white relative overflow-hidden font-pretendard",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"},children:[e.jsx("div",{className:"w-full h-6 relative overflow-hidden mt-4",children:e.jsxs("div",{className:"w-full h-1 absolute left-0 top-[18px] flex justify-center gap-4",children:[e.jsx("div",{className:"w-36 h-1 rounded-xs",style:{backgroundColor:"#2e2c6a"}}),e.jsx("div",{className:"w-36 h-1 rounded-xs",style:{backgroundColor:"#2e2c6a"}})]})}),e.jsxs("div",{className:"px-5 max-w-md mx-auto flex flex-col justify-center min-h-[calc(100vh-8rem-80px)]",children:[e.jsx("h1",{className:"text-center text-black text-2xl font-semibold mb-2 leading-tight whitespace-pre-line",children:n?o.titleWithGenre(n):o.titleDefault}),e.jsx("p",{className:"text-center text-primary-900 text-xs font-semibold mb-12",children:o.subtitle}),e.jsx("div",{className:"w-full grid grid-cols-3 gap-2",children:G.map(t=>{const i=a.includes(t.id),s=u.includes(t.id);return e.jsxs("button",{onClick:()=>p(t.id),className:`aspect-square rounded-[10px] relative overflow-hidden transition-colors ${i&&!s?"bg-white border-2":"border-2 border-transparent"} ${s?"bg-gray-200 opacity-60 cursor-not-allowed":"bg-gray-50"}`,style:i&&!s?{borderColor:"#2e2c6a"}:void 0,children:[e.jsx("div",{className:"absolute left-2 top-2 text-gray-900 text-xs font-light",children:t.number}),e.jsx("div",{className:"absolute left-2 top-[21px] text-gray-900 text-xs font-light",children:d==="en"?t.english:t.korean}),e.jsx("div",{className:"absolute left-2 bottom-2 pr-10 text-gray-900 text-xs font-bold",children:t.korean}),e.jsx("div",{className:`absolute w-7 h-7 right-2 bottom-2 bg-gradient-to-b ${t.gradient} rounded-full`}),i&&e.jsx("div",{className:"absolute right-2 top-2 w-6 h-6 flex items-center justify-center",children:e.jsx("img",{src:S,alt:"check",className:"w-6 h-6"})})]},t.id)})})]}),e.jsxs("div",{className:"fixed left-0 right-0 w-full px-5 flex gap-3",style:{bottom:"calc(3rem + env(safe-area-inset-bottom, 0px))",maxWidth:"375px",left:"50%",transform:"translateX(-50%)"},children:[e.jsx("button",{onClick:v,className:"flex-1 h-12 rounded-[10px] flex items-center justify-center",style:{backgroundColor:"#7a8dd6"},children:e.jsx("span",{className:"text-white text-base font-semibold",children:o.prev})}),e.jsx("button",{onClick:y,className:`flex-1 h-12 rounded-[10px] flex items-center justify-center transition-colors ${a.length>0&&!l?"text-white":"bg-gray-300 text-white cursor-not-allowed"}`,style:a.length>0&&!l?{backgroundColor:"#2e2c6a"}:void 0,disabled:a.length===0||l,children:e.jsx("span",{className:"text-base font-semibold",children:l?o.saving:o.complete})})]})]})}export{T as default};
