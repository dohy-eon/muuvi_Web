import{j as e,M as u0,u as e0,o as Q,S as m0}from"./index-isNbCbEh.js";import{u as t0,a as l,e as h0}from"./react-vendor-BCvJ4SZV.js";import{c as O,a as x0}from"./recoil-vendor-DrCo3c3K.js";import{g as g0,s as p0}from"./profile-3HsEP1HZ.js";import{g as b0}from"./recommendations-YKmDP5wl.js";import{L as w0,a as v0,i as C0,b as j0,r as y0,g as N0,R as L0,c as k0,d as S0}from"./RecommendInactive-Dg8Ps3e1.js";import{B as M0}from"./BottomNavigation-BaosoDGv.js";import"./supabase-vendor-DMkEyeru.js";const I0={"01":"ë¡œë§¨ìŠ¤","02":"í˜¸ëŸ¬","03":"ì½”ë¯¸ë””","04":"ê³µìƒ ê³¼í•™","05":"íŒíƒ€ì§€","06":"ì–´ë“œë²¤ì²˜","07":"ì•¡ì…˜","08":"íë§","09":"ë¯¸ìŠ¤í…Œë¦¬"};function P0({profile:s,onboardingData:u}){const d=(s==null?void 0:s.genre)||(u==null?void 0:u.genre),n=((s==null?void 0:s.moods)||(u==null?void 0:u.moods)||[]).map(m=>I0[m]||m).join(", ");return e.jsxs("div",{className:"w-full h-screen relative bg-white overflow-hidden font-pretendard",children:[e.jsxs("div",{className:"absolute top-[299px] left-[32px] right-[32px] flex items-start gap-4",children:[e.jsxs("div",{className:"text-black text-xl sm:text-2xl font-semibold font-['Pretendard'] leading-tight",children:["ë§ˆìŒì— ì™ ë“œëŠ”",e.jsx("br",{}),"ì¶”ì²œì„",e.jsx("br",{}),"ì¤€ë¹„ ì¤‘ì´ì•¼ ğŸ’­"]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:u0,alt:"Loading",className:"w-[154px] h-[119px]",style:{animation:"pulse 2s ease-in-out infinite"}})})]}),(d||n)&&e.jsxs("div",{className:"w-80 py-4 left-1/2 -translate-x-1/2 top-[441px] absolute bg-gray-50 rounded-xl inline-flex flex-col justify-start items-center gap-4",children:[d&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-start",children:[e.jsx("div",{className:"w-6 justify-start text-gray-600 text-sm font-medium font-['Pretendard'] tracking-tight",children:"ì¥ë¥´"}),e.jsx("div",{className:"text-right justify-start text-gray-900 text-sm font-medium font-['Pretendard'] tracking-tight",children:d})]}),n&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-center",children:[e.jsx("div",{className:"text-center justify-start text-gray-600 text-sm font-medium font-['Pretendard'] tracking-tight",children:"ë¬´ë“œ"}),e.jsx("div",{className:"text-center justify-start text-gray-900 text-sm font-medium font-['Pretendard'] tracking-tight",children:n})]})]})]})}const D={ë¡œë§¨ìŠ¤:"bg-[#ffbdbd]",ê³µí¬:"bg-[#2c2c2c]",ì½”ë¯¸ë””:"bg-[#ffd93d]",SF:"bg-[#003f5c]",íŒíƒ€ì§€:"bg-[#9b59b6]",ëª¨í—˜:"bg-[#ff8c42]",ì•¡ì…˜:"bg-[#e74c3c]",ë“œë¼ë§ˆ:"bg-[#8fd19e]",ê°€ì¡±:"bg-[#8fd19e]",ë¯¸ìŠ¤í„°ë¦¬:"bg-[#7f8c8d]",ìŠ¤ë¦´ëŸ¬:"bg-[#7f8c8d]",ì• ë‹ˆë©”ì´ì…˜:"bg-[#9b59b6]",ë²”ì£„:"bg-[#2c2c2c]",ë‹¤íë©˜í„°ë¦¬:"bg-[#7f8c8d]",ì—­ì‚¬:"bg-[#8d6e63]",ìŒì•…:"bg-[#ff6b9d]",ì „ìŸ:"bg-[#5d4037]",ì„œë¶€:"bg-[#d4a574]",ë¦¬ì–¼ë¦¬í‹°:"bg-[#ffd93d]",í† í¬ì‡¼:"bg-[#8fd19e]",TVì˜í™”:"bg-[#9b59b6]",default:"bg-[#9b59b6]"};function T0({content:s,isActive:u=!1,distance:d=0,onCardClick:w}){var p;const n=t0(),m=O(e0),[j,g]=l.useState(!1),[Z,y]=l.useState(!1),P=s.tags&&s.tags.length>0?s.tags.flatMap(i=>i.includes("&")?i.split("&").map(c=>c.trim()).filter(Boolean):i).slice(0,2):[];l.useEffect(()=>{(async()=>{if(!(!m||!s.id))try{const c=await C0(m.id,s.id);g(c)}catch(c){console.error("ì¢‹ì•„ìš” ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:",c)}})()},[m,s.id]);const L=i=>{if(w){w(i);return}s.id&&u&&n(`/content/${s.id}`)},v=async i=>{if(i.stopPropagation(),!m||!s.id)return;y(!0);const c=!j;g(c);try{c?await j0(m.id,s.id)||g(!1):await y0(m.id,s.id)||g(!0)}catch(h){console.error("ì¢‹ì•„ìš” ì²˜ë¦¬ ì‹¤íŒ¨:",h),g(!c)}finally{y(!1)}},T=Math.abs(d)===0?0:Math.abs(d)===1?8:12,f=Math.abs(d)===0?1:Math.abs(d)===1?.7:.4,r=Math.abs(d)===0?1:Math.abs(d)===1?.95:.9;return e.jsxs("div",{className:"w-[280px] h-[400px] relative rounded-[20px] overflow-hidden cursor-pointer flex-shrink-0 transition-all duration-500 ease-out",style:{opacity:f,transform:`scale(${r})`,filter:`blur(${T}px)`},onClick:L,children:[s.poster_url?e.jsx("img",{src:s.poster_url,alt:s.title,className:"absolute inset-0 w-full h-full object-cover"}):null,e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/0 to-black/90"}),P.length>0&&e.jsx("div",{className:"absolute top-4 left-4 flex gap-2 z-20",children:P.map((i,c)=>{const h=D[i]||D.default;return e.jsx("div",{className:`px-2 h-5 ${h} rounded-[6px] overflow-hidden flex items-center justify-center flex-shrink-0`,children:e.jsx("div",{className:"text-center text-white text-[10px] font-normal font-pretendard whitespace-nowrap",children:i})},c)})}),m&&e.jsx("button",{onClick:v,disabled:Z,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center z-30 disabled:opacity-50","aria-label":j?"ì¢‹ì•„ìš” ì·¨ì†Œ":"ì¢‹ì•„ìš”",style:{pointerEvents:"auto"},children:e.jsx("img",{src:j?w0:v0,alt:j?"ì¢‹ì•„ìš” ì·¨ì†Œ":"ì¢‹ì•„ìš”",className:"w-8 h-8"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-4 pb-4",children:e.jsxs("div",{className:"relative flex items-end gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1.5 flex-1 min-w-0",style:{maxWidth:"calc(100% - 100px)"},children:[e.jsxs("div",{className:"text-white text-xs font-normal font-pretendard whitespace-nowrap",children:[s.genre||((p=s.genres)==null?void 0:p[0])||"ì˜í™”"," â€¢",s.year||""]}),e.jsx("div",{className:"text-white font-light font-pretendard leading-tight break-words",style:{fontSize:"clamp(20px, 5.5vw, 28px)",wordBreak:"keep-all",overflowWrap:"break-word",lineHeight:"1.2",maxHeight:"3.6em",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.title}),s.ott_providers&&s.ott_providers.length>0&&e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:s.ott_providers.slice(0,6).map((i,c)=>e.jsx("div",{className:"w-5 h-5 rounded-[6px] overflow-hidden bg-white/5 backdrop-blur-sm flex items-center justify-center flex-shrink-0",children:i.logo_path?e.jsx("img",{src:i.logo_path,alt:i.provider_name,className:"w-full h-full object-contain",onError:h=>{const _=h.target;_.style.display="none";const S=_.parentElement;S&&(S.innerHTML=`<span class="text-[8px] text-white font-medium truncate px-0.5">${i.provider_name}</span>`)}}):e.jsx("span",{className:"text-[8px] text-white font-medium truncate px-0.5",children:i.provider_name})},i.provider_id||c))})]}),s.poster_url&&e.jsx("img",{src:s.poster_url,alt:`${s.title} poster`,className:"w-[84px] h-[120px] object-cover rounded-[6px] flex-shrink-0"})]})})]})}function _0({isVisible:s,message:u="notInterested"}){if(!s)return null;const d=u==="restored"?"ë‹¤ì‹œ ì´ ì‘í’ˆì„ ì¶”ì²œí• ê²Œìš”!":"ì´ì œ ì´ ì‘í’ˆì€ ì¶”ì²œë˜ì§€ ì•Šì•„ìš”!";return e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 z-50 w-full max-w-[375px] px-5 pt-2 pointer-events-none",children:[e.jsx("div",{className:"bg-[#2e2c6a] h-[36px] rounded-[12px] flex items-center justify-center shadow-lg",style:{animation:"slideDown 0.3s ease-out"},children:e.jsx("p",{className:"text-white text-[16px] font-medium font-pretendard text-center tracking-[0.232px]",children:d})}),e.jsx("style",{children:`
        @keyframes slideDown {
          from {
            transform: translateY(-100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})}const R0="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14%200C6.28048%200%200%206.28048%200%2014C0%2021.7195%206.28048%2028%2014%2028C21.7195%2028%2028%2021.7195%2028%2014C28%206.28048%2021.7195%200%2014%200ZM22.0769%2012.2601C22.0769%2012.414%2022.0158%2012.5615%2021.907%2012.6704C21.7982%2012.7792%2021.6506%2012.8403%2021.4967%2012.8403H17.4892C17.3744%2012.8405%2017.2622%2012.8066%2017.1667%2012.7428C17.0712%2012.6791%2016.9968%2012.5885%2016.9529%2012.4824C16.909%2012.3764%2016.8975%2012.2597%2016.92%2012.1471C16.9426%2012.0345%2016.998%2011.9312%2017.0793%2011.8502L18.5715%2010.358L18.1946%209.91981C17.5204%209.21988%2016.6833%208.69794%2015.758%208.40063C14.8328%208.10333%2013.8483%208.03993%2012.8926%208.2161C11.9369%208.39228%2011.0397%208.80254%2010.2813%209.41021C9.52286%2010.0179%208.92685%2010.804%208.54653%2011.6983C8.1662%2012.5926%208.01341%2013.5673%208.10183%2014.5351C8.19024%2015.5029%208.5171%2016.4337%209.05318%2017.2443C9.58926%2018.0549%2010.3178%2018.72%2011.1738%2019.1802C12.0298%2019.6404%2012.9864%2019.8813%2013.9583%2019.8813C15.1745%2019.8802%2016.3606%2019.5028%2017.3538%2018.8008C18.347%2018.0989%2019.0987%2017.1068%2019.5058%2015.9607C19.5529%2015.8272%2019.6259%2015.7043%2019.7206%2015.5991C19.8152%2015.4938%2019.9296%2015.4082%2020.0574%2015.3472C20.1851%2015.2861%2020.3236%2015.2509%2020.4649%2015.2434C20.6063%2015.2359%2020.7477%2015.2563%2020.8812%2015.3034C21.0147%2015.3506%2021.1375%2015.4236%2021.2428%2015.5182C21.3481%2015.6128%2021.4337%2015.7273%2021.4947%2015.855C21.5557%2015.9827%2021.591%2016.1212%2021.5985%2016.2626C21.606%2016.4039%2021.5856%2016.5454%2021.5385%2016.6788C21.0476%2018.068%2020.1843%2019.2954%2019.043%2020.2271C17.9017%2021.1587%2016.5262%2021.7587%2015.0669%2021.9614C13.6076%2022.1642%2012.1207%2021.9619%2010.7686%2021.3766C9.41657%2020.7913%208.2514%2019.8457%207.40048%2018.643C6.54955%2017.4403%206.04562%2016.0268%205.94376%2014.557C5.84189%2013.0872%206.14602%2011.6177%206.8229%2010.3091C7.49977%209.00052%208.52335%207.90316%209.78176%207.13699C11.0402%206.37082%2012.485%205.96532%2013.9583%205.96481C15.0456%205.96065%2016.1223%206.17917%2017.1219%206.60689C18.1216%207.03461%2019.0231%207.66249%2019.771%208.45183L19.8087%208.49356L20.0987%208.8301L21.0868%207.84202C21.1395%207.78818%2021.2023%207.74535%2021.2716%207.716C21.3409%207.68665%2021.4154%207.67137%2021.4907%207.67106C21.5673%207.67043%2021.6433%207.68501%2021.7142%207.71394C21.7852%207.74287%2021.8497%207.78558%2021.904%207.83959C21.9583%207.89361%2022.0014%207.95787%2022.0307%208.02864C22.0601%208.09942%2022.0751%208.17531%2022.0749%208.25192L22.0769%2012.2601Z'%20fill='%232E2C6A'/%3e%3c/svg%3e",Z0="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='path-1-inside-1_447_857'%20fill='white'%3e%3cpath%20d='M25.9974%206.20001C24.6954%204.8684%2023.1402%203.81079%2021.4232%203.08947C19.7063%202.36816%2017.8623%201.99774%2016%202.00001C8.26781%202.00001%202.00001%208.26781%202.00001%2016C1.99566%2019.6655%203.43338%2023.1856%206.00261%2025.8M25.996%206.20001C28.5657%208.81416%2030.004%2012.3343%2030%2016C30%2023.7322%2023.7322%2030%2016%2030C14.1377%2030.0023%2012.2937%2029.6318%2010.5768%2028.9105C8.85981%2028.1892%207.30455%2027.1316%206.00261%2025.8'/%3e%3c/mask%3e%3cpath%20d='M23.8523%208.2973C25.0106%209.48199%2026.91%209.50339%2028.0947%208.34509C29.2794%207.18679%2029.3008%205.28741%2028.1425%204.10272L25.9974%206.20001L23.8523%208.2973ZM16%202.00001V5.00001L16.0037%205.00001L16%202.00001ZM2.00001%2016L5.00001%2016.0036V16H2.00001ZM6.00261%2025.8L8.1477%2023.7027L8.14232%2023.6972L6.00261%2025.8ZM28.1354%204.09694C26.9739%202.91537%2025.0745%202.8991%2023.8929%204.06059C22.7114%205.22208%2022.6951%207.12151%2023.8566%208.30308L25.996%206.20001L28.1354%204.09694ZM30%2016L27%2015.9967V16H30ZM16%2030V27L15.9963%2027L16%2030ZM25.9974%206.20001L28.1425%204.10272C26.5607%202.4849%2024.6712%201.19998%2022.5852%200.323636L21.4232%203.08947L20.2613%205.85531C21.6092%206.42159%2022.8302%207.25189%2023.8523%208.2973L25.9974%206.20001ZM21.4232%203.08947L22.5852%200.323636C20.4992%20-0.552707%2018.2589%20-1.00275%2015.9963%20-0.999987L16%202.00001L16.0037%205.00001C17.4657%204.99822%2018.9133%205.28903%2020.2613%205.85531L21.4232%203.08947ZM16%202.00001V-0.99999C6.61095%20-0.99999%20-0.99999%206.61095%20-0.99999%2016H2.00001H5.00001C5.00001%209.92466%209.92466%205.00001%2016%205.00001V2.00001ZM2.00001%2016L-0.999988%2015.9964C-1.00527%2020.4498%200.741454%2024.7265%203.86289%2027.9028L6.00261%2025.8L8.14232%2023.6972C6.1253%2021.6448%204.9966%2018.8812%205.00001%2016.0036L2.00001%2016ZM25.996%206.20001L23.8566%208.30308C25.874%2010.3554%2027.0031%2013.1189%2027%2015.9967L30%2016L33%2016.0033C33.0048%2011.5497%2031.2575%207.27296%2028.1354%204.09694L25.996%206.20001ZM30%2016H27C27%2022.0753%2022.0753%2027%2016%2027V30V33C25.389%2033%2033%2025.389%2033%2016H30ZM16%2030L15.9963%2027C14.5343%2027.0018%2013.0867%2026.711%2011.7387%2026.1447L10.5768%2028.9105L9.41481%2031.6764C11.5008%2032.5527%2013.7411%2033.0028%2016.0037%2033L16%2030ZM10.5768%2028.9105L11.7387%2026.1447C10.3908%2025.5784%209.16981%2024.7481%208.14769%2023.7027L6.00261%2025.8L3.85753%2027.8973C5.4393%2029.5151%207.32882%2030.8%209.41481%2031.6764L10.5768%2028.9105Z'%20fill='%232E2C6A'%20mask='url(%23path-1-inside-1_447_857)'/%3e%3cpath%20d='M6.5%2025.5L25%207'%20stroke='%232E2C6A'%20stroke-width='3'/%3e%3c/svg%3e",E0={"01":"ë¡œë§¨ìŠ¤","02":"í˜¸ëŸ¬","03":"ì½”ë¯¸ë””","04":"ê³µìƒ ê³¼í•™","05":"íŒíƒ€ì§€","06":"ì–´ë“œë²¤ì²˜","07":"ì•¡ì…˜","08":"íë§","09":"ë¯¸ìŠ¤í…Œë¦¬"};function G0(){var W,G;const s=t0(),u=h0(),d=x0(Q),w=O(e0),[n,m]=l.useState([]),[j,g]=l.useState(!1),[Z,y]=l.useState(!1),[P,L]=l.useState(!1),[v,T]=l.useState(null),f=O(Q),[r,p]=l.useState(0),i=l.useRef(null),[c,h]=l.useState(!1),[_,S]=l.useState("notInterested"),[E,$]=l.useState(new Set),[A,z]=l.useState(null),[F,R]=l.useState(null),k=l.useRef(!1),s0=()=>{m([]),T(null),d(null),g(!1),s("/onboarding")},H=l.useCallback(async(t=!1)=>{if(!t&&n.length>0&&!f){g(!1),L(!1),y(!1);return}const a=f&&!t&&n.length===0;try{const o="temp-user-id";let x=await g0(o);if(f&&(t||!x)&&(x=await p0(o,f)??x),x){T(x);let C=[];if(w)try{C=await N0(w.id),$(new Set(C))}catch(I){console.error("ê´€ì‹¬ì—†ìŒ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:",I)}let N=await b0(x,t);N=N.filter(I=>!C.includes(I.id)),N=N.slice(0,3),m(N),p(0)}}catch(o){console.error("ì¶”ì²œ ì½˜í…ì¸  ë¡œë“œ ì‹¤íŒ¨:",o)}finally{a&&(g(!1),y(!1)),L(!1)}},[f,n.length]),a0=()=>{H(!0)};if(l.useEffect(()=>{const t=u.pathname,a=sessionStorage.getItem("prevPath")||i.current;n.length===0&&(a!=null&&a.includes("/onboarding")?(y(!0),g(!0),L(!1)):(L(!0),y(!1),g(!1))),i.current=t,sessionStorage.setItem("prevPath",t),H()},[H,n.length,u.pathname]),j&&Z)return e.jsx(P0,{profile:v,onboardingData:f});if(P)return e.jsx(m0,{});const B=(v==null?void 0:v.genre)||(f==null?void 0:f.genre),V=((v==null?void 0:v.moods)||(f==null?void 0:f.moods)||[]).map(t=>E0[t]||t).join(", "),n0=()=>{r<n.length-1&&p(t=>t+1)},r0=()=>{r>0&&p(t=>t-1)},X=50,i0=t=>{k.current=!1,R(null),z(t.targetTouches[0].clientX)},l0=t=>{R(t.targetTouches[0].clientX)},o0=()=>{if(!A||!F){z(null),R(null);return}const t=A-F,a=t>X,o=t<-X;a&&r<n.length-1?(k.current=!0,n0()):o&&r>0&&(k.current=!0,r0()),z(null),R(null),setTimeout(()=>{k.current=!1},300)},c0=async t=>{if(E.has(t)){if(w)try{await k0(w.id,t)}catch(a){console.error("ê´€ì‹¬ì—†ìŒ ì·¨ì†Œ ì‹¤íŒ¨:",a)}$(a=>{const o=new Set(a);return o.delete(t),o}),S("restored"),h(!0),setTimeout(()=>{h(!1)},3e3);return}if(w)try{await S0(w.id,t)}catch(a){console.error("ê´€ì‹¬ì—†ìŒ ì €ì¥ ì‹¤íŒ¨:",a)}$(a=>new Set(a).add(t)),S("notInterested"),h(!0),setTimeout(()=>{h(!1)},3e3)};return e.jsxs("div",{className:"w-full h-screen bg-white relative font-pretendard overflow-hidden overflow-x-hidden",children:[e.jsx(_0,{isVisible:c,message:_}),e.jsxs("div",{className:"h-full overflow-y-auto overflow-x-hidden bg-white relative",onClick:t=>{const a=t.target;if(a.closest("button")||a.closest("a")||a.tagName==="BUTTON"||a.tagName==="A"||a.closest("[data-card-container]")||a.closest(".bg-gray-50")||k.current)return;const o=t.currentTarget.getBoundingClientRect(),x=t.clientX-o.left,M=o.width,C=x<M/2;if(C&&r>0){t.stopPropagation(),t.preventDefault(),p(r-1);return}if(!C&&r<n.length-1){t.stopPropagation(),t.preventDefault(),p(r+1);return}},children:[(B||V)&&e.jsxs("div",{className:"w-80 py-4 left-1/2 -translate-x-1/2 top-[600px] absolute bg-gray-50 rounded-xl inline-flex flex-col justify-start items-center gap-4",children:[B&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-start",children:[e.jsx("div",{className:"w-6 justify-start text-gray-600 text-sm font-medium font-pretendard tracking-tight",children:"ì¥ë¥´"}),e.jsx("div",{className:"text-right justify-start text-gray-900 text-sm font-medium font-pretendard tracking-tight",children:B})]}),V&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-center",children:[e.jsx("div",{className:"text-center justify-start text-gray-600 text-sm font-medium font-pretendard tracking-tight",children:"ë¬´ë“œ"}),e.jsx("div",{className:"text-center justify-start text-gray-900 text-sm font-medium font-pretendard tracking-tight",children:V})]})]}),j?e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-gray-600"}):n.length===0?e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-gray-600",children:"ì¶”ì²œ ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤."}):e.jsx("div",{className:"absolute top-[80px] w-full h-[600px] overflow-hidden z-10",children:e.jsx("div",{className:"relative w-full h-full",children:n.map((t,a)=>{const o=a-r,x=o*25,M=180,C=Math.sin(x*Math.PI/180)*M,N=(1-Math.cos(x*Math.PI/180))*M*.3,I=b=>{if(k.current){b.preventDefault(),b.stopPropagation();return}if(b.target.closest("button")||a!==r)return;const Y=b.currentTarget.getBoundingClientRect(),K=b.clientX-Y.left,U=Y.width,q=U/2,d0=Math.abs(K-q),f0=U*.3;if(d0<f0){t.id&&s(`/content/${t.id}`),b.stopPropagation();return}const J=K<q;J&&r>0?(b.stopPropagation(),p(r-1)):!J&&r<n.length-1?(b.stopPropagation(),p(r+1)):b.stopPropagation()};return e.jsx("div",{"data-card-container":!0,className:"absolute left-1/2 top-0 origin-center transition-all duration-500 ease-out",style:{transform:`translateX(calc(-50% + ${C}px)) translateY(${N}px) rotate(${x}deg)`,zIndex:n.length-Math.abs(o)},onTouchStart:i0,onTouchMove:l0,onTouchEnd:o0,onClick:b=>{b.stopPropagation()},children:e.jsx(T0,{content:t,isActive:a===r,distance:o,onCardClick:I})},t.id)})})}),n.length>1&&e.jsx("div",{className:"absolute top-[508px] left-1/2 -translate-x-1/2 z-30 flex gap-2 pointer-events-none",children:n.map((t,a)=>e.jsx("button",{onClick:()=>p(a),className:`pointer-events-auto transition-all ${a===r?"w-2 h-2 bg-[#2e2c6a] rounded-full":"w-2 h-2 bg-[#2e2c6a]/40 rounded-full hover:bg-[#2e2c6a]/60"}`,"aria-label":`Go to recommendation ${a+1}`},a))}),e.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-[540px] flex items-center justify-center gap-4 z-30",children:[e.jsx("button",{onClick:s0,className:"px-4 py-2 bg-[#2e2c6a] text-white text-sm font-semibold rounded-lg hover:bg-[#3a3878] transition-colors whitespace-nowrap",children:"ë‹¤ì‹œí•˜ê¸°"}),e.jsx("button",{type:"button","aria-label":"reload-recommendations",className:"size-8 flex items-center justify-center rounded-full bg-white/0",onClick:a0,children:e.jsx("img",{src:R0,alt:"reload",className:"w-[28px] h-[28px]"})}),n.length>0&&n[r]&&e.jsx("button",{type:"button","aria-label":"not-interested",className:"size-8 flex items-center justify-center rounded-full bg-white/0",onClick:()=>{const t=n[r];t!=null&&t.id&&c0(t.id)},children:e.jsx("img",{src:E.has(((W=n[r])==null?void 0:W.id)||"")?L0:Z0,alt:E.has(((G=n[r])==null?void 0:G.id)||"")?"ê´€ì‹¬ì—†ìŒ ì·¨ì†Œ":"ê´€ì‹¬ì—†ìŒ",className:"w-[28px] h-[28px]"})})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30 pt-4 pb-2 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(M0,{})})})]})}export{G0 as default};
