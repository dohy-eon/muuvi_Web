import{j as e,M as xe,u as ne,l as W,o as se,S as pe}from"./index-BREGoMZi.js";import{u as re,a as i,e as be}from"./react-vendor-BCvJ4SZV.js";import{b as M,a as we}from"./recoil-vendor-BPQO4bvt.js";import{g as ve,s as Ce}from"./profile-tCheCMGW.js";import{g as je}from"./recommendations-COa1II3e.js";import{L as ye,a as Ne,i as Le,b as ke,r as Se,g as Me,R as Ie,c as Te,d as _e}from"./RecommendInactive-C-2kwt-U.js";import{B as Pe}from"./BottomNavigation-DgnTffoS.js";import"./supabase-vendor-DMkEyeru.js";const Re={"01":"ë¡œë§¨ìŠ¤","02":"í˜¸ëŸ¬","03":"ì½”ë¯¸ë””","04":"ê³µìƒ ê³¼í•™","05":"íŒíƒ€ì§€","06":"ì–´ë“œë²¤ì²˜","07":"ì•¡ì…˜","08":"ížë§","09":"ë¯¸ìŠ¤í…Œë¦¬"};function Ee({profile:s,onboardingData:m}){const f=(s==null?void 0:s.genre)||(m==null?void 0:m.genre),p=((s==null?void 0:s.moods)||(m==null?void 0:m.moods)||[]).map(l=>Re[l]||l).join(", ");return e.jsxs("div",{className:"w-full h-screen relative bg-white overflow-hidden font-pretendard",children:[e.jsxs("div",{className:"absolute top-[299px] left-[32px] right-[32px] flex items-start gap-4",children:[e.jsxs("div",{className:"text-black text-xl sm:text-2xl font-semibold font-['Pretendard'] leading-tight",children:["ë§ˆìŒì— ì™ ë“œëŠ”",e.jsx("br",{}),"ì¶”ì²œì„",e.jsx("br",{}),"ì¤€ë¹„ ì¤‘ì´ì•¼ ðŸ’­"]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:xe,alt:"Loading",className:"w-[154px] h-[119px]",style:{animation:"pulse 2s ease-in-out infinite"}})})]}),(f||p)&&e.jsxs("div",{className:"w-80 py-4 left-1/2 -translate-x-1/2 top-[441px] absolute bg-gray-50 rounded-xl inline-flex flex-col justify-start items-center gap-4",children:[f&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-start",children:[e.jsx("div",{className:"w-6 justify-start text-gray-600 text-sm font-medium font-['Pretendard'] tracking-tight",children:"ìž¥ë¥´"}),e.jsx("div",{className:"text-right justify-start text-gray-900 text-sm font-medium font-['Pretendard'] tracking-tight",children:f})]}),p&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-center",children:[e.jsx("div",{className:"text-center justify-start text-gray-600 text-sm font-medium font-['Pretendard'] tracking-tight",children:"ë¬´ë“œ"}),e.jsx("div",{className:"text-center justify-start text-gray-900 text-sm font-medium font-['Pretendard'] tracking-tight",children:p})]})]})]})}const ae={ë¡œë§¨ìŠ¤:"bg-[#ffbdbd]",ê³µí¬:"bg-[#2c2c2c]",ì½”ë¯¸ë””:"bg-[#ffd93d]",SF:"bg-[#003f5c]",íŒíƒ€ì§€:"bg-[#9b59b6]",ëª¨í—˜:"bg-[#ff8c42]",ì•¡ì…˜:"bg-[#e74c3c]",ë“œë¼ë§ˆ:"bg-[#8fd19e]",ê°€ì¡±:"bg-[#8fd19e]",ë¯¸ìŠ¤í„°ë¦¬:"bg-[#7f8c8d]",ìŠ¤ë¦´ëŸ¬:"bg-[#7f8c8d]",ì• ë‹ˆë©”ì´ì…˜:"bg-[#9b59b6]",ë²”ì£„:"bg-[#2c2c2c]",ë‹¤íë©˜í„°ë¦¬:"bg-[#7f8c8d]",ì—­ì‚¬:"bg-[#8d6e63]",ìŒì•…:"bg-[#ff6b9d]",ì „ìŸ:"bg-[#5d4037]",ì„œë¶€:"bg-[#d4a574]",ë¦¬ì–¼ë¦¬í‹°:"bg-[#ffd93d]",í† í¬ì‡¼:"bg-[#8fd19e]",TVì˜í™”:"bg-[#9b59b6]",Romance:"bg-[#ffbdbd]",Horror:"bg-[#2c2c2c]",Comedy:"bg-[#ffd93d]","Sci-Fi":"bg-[#003f5c]","Science Fiction":"bg-[#003f5c]",Fantasy:"bg-[#9b59b6]",Adventure:"bg-[#ff8c42]",Action:"bg-[#e74c3c]",Drama:"bg-[#8fd19e]",Family:"bg-[#8fd19e]",Mystery:"bg-[#7f8c8d]",Thriller:"bg-[#7f8c8d]",Animation:"bg-[#9b59b6]",Crime:"bg-[#2c2c2c]",Documentary:"bg-[#7f8c8d]",History:"bg-[#8d6e63]",Music:"bg-[#ff6b9d]",War:"bg-[#5d4037]",Western:"bg-[#d4a574]",Reality:"bg-[#ffd93d]","Talk Show":"bg-[#8fd19e]","TV Movie":"bg-[#9b59b6]",Movie:"bg-[#9b59b6]",Classic:"bg-[#9b59b6]",default:"bg-[#9b59b6]"};function Ze({content:s,isActive:m=!1,distance:f=0,onCardClick:g}){var o;const p=re(),l=M(ne),P=M(W),[r,C]=i.useState(!1),[R,j]=i.useState(!1),I=P==="en"&&s.tags_en&&s.tags_en.length>0?s.tags_en:s.tags,y=I&&I.length>0?I.flatMap(n=>n.includes("&")?n.split("&").map(c=>c.trim()).filter(Boolean):n).slice(0,2):[];i.useEffect(()=>{(async()=>{if(!(!l||!s.id))try{const c=await Le(l.id,s.id);C(c)}catch(c){console.error("ì¢‹ì•„ìš” ìƒíƒœ í™•ì¸ ì‹¤íŒ¨:",c)}})()},[l,s.id]);const H=n=>{if(g){g(n);return}s.id&&m&&p(`/content/${s.id}`)},k=async n=>{if(n.stopPropagation(),!l||!s.id)return;j(!0);const c=!r;C(c);try{c?await ke(l.id,s.id)||C(!1):await Se(l.id,s.id)||C(!0)}catch(w){console.error("ì¢‹ì•„ìš” ì²˜ë¦¬ ì‹¤íŒ¨:",w),C(!c)}finally{j(!1)}},b=Math.abs(f)===0?0:Math.abs(f)===1?8:12,E=Math.abs(f)===0?1:Math.abs(f)===1?.7:.4,u=Math.abs(f)===0?1:Math.abs(f)===1?.95:.9;return e.jsxs("div",{className:"w-[280px] h-[400px] relative rounded-[20px] overflow-hidden cursor-pointer flex-shrink-0 transition-all duration-500 ease-out",style:{opacity:E,transform:`scale(${u})`,filter:`blur(${b}px)`},onClick:H,children:[s.poster_url?e.jsx("img",{src:s.poster_url,alt:s.title,className:"absolute inset-0 w-full h-full object-cover"}):null,e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/0 to-black/90"}),y.length>0&&e.jsx("div",{className:"absolute top-4 left-4 flex gap-2 z-20",children:y.map((n,c)=>{const w=ae[n]||ae.default;return e.jsx("div",{className:`px-2 h-5 ${w} rounded-[6px] overflow-hidden flex items-center justify-center flex-shrink-0`,children:e.jsx("div",{className:"text-center text-white text-[10px] font-normal font-pretendard whitespace-nowrap",children:n})},c)})}),l&&e.jsx("button",{onClick:k,disabled:R,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center z-30 disabled:opacity-50","aria-label":r?"ì¢‹ì•„ìš” ì·¨ì†Œ":"ì¢‹ì•„ìš”",style:{pointerEvents:"auto"},children:e.jsx("img",{src:r?ye:Ne,alt:r?"ì¢‹ì•„ìš” ì·¨ì†Œ":"ì¢‹ì•„ìš”",className:"w-8 h-8"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-4 pb-4",children:e.jsxs("div",{className:"relative flex items-end gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1.5 flex-1 min-w-0",style:{maxWidth:"calc(100% - 100px)"},children:[e.jsxs("div",{className:"text-white text-xs font-normal font-pretendard whitespace-nowrap",children:[s.genre||((o=s.genres)==null?void 0:o[0])||"ì˜í™”"," â€¢",s.year||""]}),e.jsx("div",{className:"text-white font-light font-pretendard leading-tight break-words",style:{fontSize:"clamp(20px, 5.5vw, 28px)",wordBreak:"keep-all",overflowWrap:"break-word",lineHeight:"1.2",maxHeight:"3.6em",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:P==="en"&&s.title_en?s.title_en:s.title}),s.ott_providers&&s.ott_providers.length>0&&e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:s.ott_providers.slice(0,6).map((n,c)=>e.jsx("div",{className:"w-5 h-5 rounded-[6px] overflow-hidden bg-white/5 backdrop-blur-sm flex items-center justify-center flex-shrink-0",children:n.logo_path?e.jsx("img",{src:n.logo_path,alt:n.provider_name,className:"w-full h-full object-contain",onError:w=>{const N=w.target;N.style.display="none";const Z=N.parentElement;Z&&(Z.innerHTML=`<span class="text-[8px] text-white font-medium truncate px-0.5">${n.provider_name}</span>`)}}):e.jsx("span",{className:"text-[8px] text-white font-medium truncate px-0.5",children:n.provider_name})},n.provider_id||c))})]}),s.poster_url&&e.jsx("img",{src:s.poster_url,alt:`${s.title} poster`,className:"w-[84px] h-[120px] object-cover rounded-[6px] flex-shrink-0"})]})})]})}const Ae={ko:{notInterested:"ì´ì œ ì´ ìž‘í’ˆì€ ì¶”ì²œë˜ì§€ ì•Šì•„ìš”!",restored:"ë‹¤ì‹œ ì´ ìž‘í’ˆì„ ì¶”ì²œí• ê²Œìš”!"},en:{notInterested:"This content will not be recommended.",restored:"This content will be recommended again!"}};function He({isVisible:s,message:m="notInterested"}){const f=M(W),g=Ae[f];if(!s)return null;const p=m==="restored"?g.restored:g.notInterested;return e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 z-50 w-full max-w-[375px] px-5 pt-2 pointer-events-none",children:[e.jsx("div",{className:"bg-[#2e2c6a] h-[36px] rounded-[12px] flex items-center justify-center shadow-lg",style:{animation:"slideDown 0.3s ease-out"},children:e.jsx("p",{className:"text-white text-[16px] font-medium font-pretendard text-center tracking-[0.232px]",children:p})}),e.jsx("style",{children:`
        @keyframes slideDown {
          from {
            transform: translateY(-100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
      `})]})}const Fe="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14%200C6.28048%200%200%206.28048%200%2014C0%2021.7195%206.28048%2028%2014%2028C21.7195%2028%2028%2021.7195%2028%2014C28%206.28048%2021.7195%200%2014%200ZM22.0769%2012.2601C22.0769%2012.414%2022.0158%2012.5615%2021.907%2012.6704C21.7982%2012.7792%2021.6506%2012.8403%2021.4967%2012.8403H17.4892C17.3744%2012.8405%2017.2622%2012.8066%2017.1667%2012.7428C17.0712%2012.6791%2016.9968%2012.5885%2016.9529%2012.4824C16.909%2012.3764%2016.8975%2012.2597%2016.92%2012.1471C16.9426%2012.0345%2016.998%2011.9312%2017.0793%2011.8502L18.5715%2010.358L18.1946%209.91981C17.5204%209.21988%2016.6833%208.69794%2015.758%208.40063C14.8328%208.10333%2013.8483%208.03993%2012.8926%208.2161C11.9369%208.39228%2011.0397%208.80254%2010.2813%209.41021C9.52286%2010.0179%208.92685%2010.804%208.54653%2011.6983C8.1662%2012.5926%208.01341%2013.5673%208.10183%2014.5351C8.19024%2015.5029%208.5171%2016.4337%209.05318%2017.2443C9.58926%2018.0549%2010.3178%2018.72%2011.1738%2019.1802C12.0298%2019.6404%2012.9864%2019.8813%2013.9583%2019.8813C15.1745%2019.8802%2016.3606%2019.5028%2017.3538%2018.8008C18.347%2018.0989%2019.0987%2017.1068%2019.5058%2015.9607C19.5529%2015.8272%2019.6259%2015.7043%2019.7206%2015.5991C19.8152%2015.4938%2019.9296%2015.4082%2020.0574%2015.3472C20.1851%2015.2861%2020.3236%2015.2509%2020.4649%2015.2434C20.6063%2015.2359%2020.7477%2015.2563%2020.8812%2015.3034C21.0147%2015.3506%2021.1375%2015.4236%2021.2428%2015.5182C21.3481%2015.6128%2021.4337%2015.7273%2021.4947%2015.855C21.5557%2015.9827%2021.591%2016.1212%2021.5985%2016.2626C21.606%2016.4039%2021.5856%2016.5454%2021.5385%2016.6788C21.0476%2018.068%2020.1843%2019.2954%2019.043%2020.2271C17.9017%2021.1587%2016.5262%2021.7587%2015.0669%2021.9614C13.6076%2022.1642%2012.1207%2021.9619%2010.7686%2021.3766C9.41657%2020.7913%208.2514%2019.8457%207.40048%2018.643C6.54955%2017.4403%206.04562%2016.0268%205.94376%2014.557C5.84189%2013.0872%206.14602%2011.6177%206.8229%2010.3091C7.49977%209.00052%208.52335%207.90316%209.78176%207.13699C11.0402%206.37082%2012.485%205.96532%2013.9583%205.96481C15.0456%205.96065%2016.1223%206.17917%2017.1219%206.60689C18.1216%207.03461%2019.0231%207.66249%2019.771%208.45183L19.8087%208.49356L20.0987%208.8301L21.0868%207.84202C21.1395%207.78818%2021.2023%207.74535%2021.2716%207.716C21.3409%207.68665%2021.4154%207.67137%2021.4907%207.67106C21.5673%207.67043%2021.6433%207.68501%2021.7142%207.71394C21.7852%207.74287%2021.8497%207.78558%2021.904%207.83959C21.9583%207.89361%2022.0014%207.95787%2022.0307%208.02864C22.0601%208.09942%2022.0751%208.17531%2022.0749%208.25192L22.0769%2012.2601Z'%20fill='%232E2C6A'/%3e%3c/svg%3e",$e="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='path-1-inside-1_447_857'%20fill='white'%3e%3cpath%20d='M25.9974%206.20001C24.6954%204.8684%2023.1402%203.81079%2021.4232%203.08947C19.7063%202.36816%2017.8623%201.99774%2016%202.00001C8.26781%202.00001%202.00001%208.26781%202.00001%2016C1.99566%2019.6655%203.43338%2023.1856%206.00261%2025.8M25.996%206.20001C28.5657%208.81416%2030.004%2012.3343%2030%2016C30%2023.7322%2023.7322%2030%2016%2030C14.1377%2030.0023%2012.2937%2029.6318%2010.5768%2028.9105C8.85981%2028.1892%207.30455%2027.1316%206.00261%2025.8'/%3e%3c/mask%3e%3cpath%20d='M23.8523%208.2973C25.0106%209.48199%2026.91%209.50339%2028.0947%208.34509C29.2794%207.18679%2029.3008%205.28741%2028.1425%204.10272L25.9974%206.20001L23.8523%208.2973ZM16%202.00001V5.00001L16.0037%205.00001L16%202.00001ZM2.00001%2016L5.00001%2016.0036V16H2.00001ZM6.00261%2025.8L8.1477%2023.7027L8.14232%2023.6972L6.00261%2025.8ZM28.1354%204.09694C26.9739%202.91537%2025.0745%202.8991%2023.8929%204.06059C22.7114%205.22208%2022.6951%207.12151%2023.8566%208.30308L25.996%206.20001L28.1354%204.09694ZM30%2016L27%2015.9967V16H30ZM16%2030V27L15.9963%2027L16%2030ZM25.9974%206.20001L28.1425%204.10272C26.5607%202.4849%2024.6712%201.19998%2022.5852%200.323636L21.4232%203.08947L20.2613%205.85531C21.6092%206.42159%2022.8302%207.25189%2023.8523%208.2973L25.9974%206.20001ZM21.4232%203.08947L22.5852%200.323636C20.4992%20-0.552707%2018.2589%20-1.00275%2015.9963%20-0.999987L16%202.00001L16.0037%205.00001C17.4657%204.99822%2018.9133%205.28903%2020.2613%205.85531L21.4232%203.08947ZM16%202.00001V-0.99999C6.61095%20-0.99999%20-0.99999%206.61095%20-0.99999%2016H2.00001H5.00001C5.00001%209.92466%209.92466%205.00001%2016%205.00001V2.00001ZM2.00001%2016L-0.999988%2015.9964C-1.00527%2020.4498%200.741454%2024.7265%203.86289%2027.9028L6.00261%2025.8L8.14232%2023.6972C6.1253%2021.6448%204.9966%2018.8812%205.00001%2016.0036L2.00001%2016ZM25.996%206.20001L23.8566%208.30308C25.874%2010.3554%2027.0031%2013.1189%2027%2015.9967L30%2016L33%2016.0033C33.0048%2011.5497%2031.2575%207.27296%2028.1354%204.09694L25.996%206.20001ZM30%2016H27C27%2022.0753%2022.0753%2027%2016%2027V30V33C25.389%2033%2033%2025.389%2033%2016H30ZM16%2030L15.9963%2027C14.5343%2027.0018%2013.0867%2026.711%2011.7387%2026.1447L10.5768%2028.9105L9.41481%2031.6764C11.5008%2032.5527%2013.7411%2033.0028%2016.0037%2033L16%2030ZM10.5768%2028.9105L11.7387%2026.1447C10.3908%2025.5784%209.16981%2024.7481%208.14769%2023.7027L6.00261%2025.8L3.85753%2027.8973C5.4393%2029.5151%207.32882%2030.8%209.41481%2031.6764L10.5768%2028.9105Z'%20fill='%232E2C6A'%20mask='url(%23path-1-inside-1_447_857)'/%3e%3cpath%20d='M6.5%2025.5L25%207'%20stroke='%232E2C6A'%20stroke-width='3'/%3e%3c/svg%3e",ze={ko:{"01":"ë¡œë§¨ìŠ¤","02":"í˜¸ëŸ¬","03":"ì½”ë¯¸ë””","04":"ê³µìƒ ê³¼í•™","05":"íŒíƒ€ì§€","06":"ì–´ë“œë²¤ì²˜","07":"ì•¡ì…˜","08":"ížë§","09":"ë¯¸ìŠ¤í…Œë¦¬"},en:{"01":"Romance","02":"Horror","03":"Comedy","04":"Sci-Fi","05":"Fantasy","06":"Adventure","07":"Action","08":"Healing","09":"Mystery"}},Be={ko:{genre:"ìž¥ë¥´",mood:"ë¬´ë“œ",noContent:"ì¶”ì²œ ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤.",loading:"ë¡œë”© ì¤‘...",restart:"ë‹¤ì‹œí•˜ê¸°",notInterested:"ê´€ì‹¬ì—†ìŒ",notInterestedCancel:"ê´€ì‹¬ì—†ìŒ ì·¨ì†Œ"},en:{genre:"Genre",mood:"Mood",noContent:"No recommendations available.",loading:"Loading...",restart:"Restart",notInterested:"Not Interested",notInterestedCancel:"Restore Interest"}};function Je(){var K,q;const s=re(),m=be(),f=we(se),g=M(ne),p=M(W),l=Be[p],P=ze[p],[r,C]=i.useState([]),[R,j]=i.useState(!1),[I,y]=i.useState(!1),[H,k]=i.useState(!1),[b,E]=i.useState(null),u=M(se),[o,n]=i.useState(0),c=i.useRef(null),[w,N]=i.useState(!1),[Z,X]=i.useState("notInterested"),[F,$]=i.useState(new Set),[G,z]=i.useState(null),[Y,A]=i.useState(null),S=i.useRef(!1),oe=()=>{C([]),E(null),f(null),j(!1),s("/onboarding")},B=i.useCallback(async(t=!1)=>{if(!t&&r.length>0&&!u){j(!1),k(!1),y(!1);return}const a=u&&!t&&r.length===0;try{const d="temp-user-id";let h=await ve(d);if(u&&(t||!h)&&(h=await Ce(d,u)??h),h){E(h);let v=[];if(g)try{v=await Me(g.id),$(new Set(v))}catch(_){console.error("ê´€ì‹¬ì—†ìŒ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:",_)}let L=await je(h,t);L=L.filter(_=>!v.includes(_.id)),L=L.slice(0,3),C(L),n(0)}}catch(d){console.error("ì¶”ì²œ ì½˜í…ì¸  ë¡œë“œ ì‹¤íŒ¨:",d)}finally{a&&(j(!1),y(!1)),k(!1)}},[u,r.length]),ie=()=>{B(!0)};if(i.useEffect(()=>{const t=m.pathname,a=sessionStorage.getItem("prevPath")||c.current;r.length===0&&(a!=null&&a.includes("/onboarding")?(y(!0),j(!0),k(!1)):(k(!0),y(!1),j(!1))),c.current=t,sessionStorage.setItem("prevPath",t),B()},[B,r.length,m.pathname]),R&&I)return e.jsx(Ee,{profile:b,onboardingData:u});if(H)return e.jsx(pe,{});const O=(b==null?void 0:b.genre)||(u==null?void 0:u.genre),V=((b==null?void 0:b.moods)||(u==null?void 0:u.moods)||[]).map(t=>P[t]||t).join(", "),le=()=>{o<r.length-1&&n(t=>t+1)},ce=()=>{o>0&&n(t=>t-1)},U=50,de=t=>{S.current=!1,A(null),z(t.targetTouches[0].clientX)},fe=t=>{A(t.targetTouches[0].clientX)},ue=()=>{if(!G||!Y){z(null),A(null);return}const t=G-Y,a=t>U,d=t<-U;a&&o<r.length-1?(S.current=!0,le()):d&&o>0&&(S.current=!0,ce()),z(null),A(null),setTimeout(()=>{S.current=!1},300)},me=async t=>{if(F.has(t)){if(g)try{await Te(g.id,t)}catch(a){console.error("ê´€ì‹¬ì—†ìŒ ì·¨ì†Œ ì‹¤íŒ¨:",a)}$(a=>{const d=new Set(a);return d.delete(t),d}),X("restored"),N(!0),setTimeout(()=>{N(!1)},3e3);return}if(g)try{await _e(g.id,t)}catch(a){console.error("ê´€ì‹¬ì—†ìŒ ì €ìž¥ ì‹¤íŒ¨:",a)}$(a=>new Set(a).add(t)),X("notInterested"),N(!0),setTimeout(()=>{N(!1)},3e3)};return e.jsxs("div",{className:"w-full h-screen bg-white relative font-pretendard overflow-hidden overflow-x-hidden",children:[e.jsx(He,{isVisible:w,message:Z}),e.jsxs("div",{className:"h-full overflow-y-auto overflow-x-hidden bg-white relative",onClick:t=>{const a=t.target;if(a.closest("button")||a.closest("a")||a.tagName==="BUTTON"||a.tagName==="A"||a.closest("[data-card-container]")||a.closest(".bg-gray-50")||S.current)return;const d=t.currentTarget.getBoundingClientRect(),h=t.clientX-d.left,T=d.width,v=h<T/2;if(v&&o>0){t.stopPropagation(),t.preventDefault(),n(o-1);return}if(!v&&o<r.length-1){t.stopPropagation(),t.preventDefault(),n(o+1);return}},children:[(O||V)&&e.jsxs("div",{className:"w-80 py-4 left-1/2 -translate-x-1/2 top-[600px] absolute bg-gray-50 rounded-xl inline-flex flex-col justify-start items-center gap-4",children:[O&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-start",children:[e.jsx("div",{className:"w-16 justify-start text-gray-600 text-sm font-medium font-pretendard tracking-tight",children:l.genre}),e.jsx("div",{className:"text-right justify-start text-gray-900 text-sm font-medium font-pretendard tracking-tight",children:O})]}),V&&e.jsxs("div",{className:"w-72 inline-flex justify-between items-center",children:[e.jsx("div",{className:"w-16 text-left justify-start text-gray-600 text-sm font-medium font-pretendard tracking-tight",children:l.mood}),e.jsx("div",{className:"text-right justify-start text-gray-900 text-sm font-medium font-pretendard tracking-tight",children:V})]})]}),R?e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-gray-600"}):r.length===0?e.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-gray-600",children:l.noContent}):e.jsx("div",{className:"absolute top-[80px] w-full h-[600px] overflow-hidden z-10",children:e.jsx("div",{className:"relative w-full h-full",children:r.map((t,a)=>{const d=a-o,h=d*25,T=180,v=Math.sin(h*Math.PI/180)*T,L=(1-Math.cos(h*Math.PI/180))*T*.3,_=x=>{if(S.current){x.preventDefault(),x.stopPropagation();return}if(x.target.closest("button")||a!==o)return;const D=x.currentTarget.getBoundingClientRect(),J=x.clientX-D.left,Q=D.width,ee=Q/2,ge=Math.abs(J-ee),he=Q*.3;if(ge<he){t.id&&s(`/content/${t.id}`),x.stopPropagation();return}const te=J<ee;te&&o>0?(x.stopPropagation(),n(o-1)):!te&&o<r.length-1?(x.stopPropagation(),n(o+1)):x.stopPropagation()};return e.jsx("div",{"data-card-container":!0,className:"absolute left-1/2 top-0 origin-center transition-all duration-500 ease-out",style:{transform:`translateX(calc(-50% + ${v}px)) translateY(${L}px) rotate(${h}deg)`,zIndex:r.length-Math.abs(d)},onTouchStart:de,onTouchMove:fe,onTouchEnd:ue,onClick:x=>{x.stopPropagation()},children:e.jsx(Ze,{content:t,isActive:a===o,distance:d,onCardClick:_})},t.id)})})}),r.length>1&&e.jsx("div",{className:"absolute top-[508px] left-1/2 -translate-x-1/2 z-30 flex gap-2 pointer-events-none",children:r.map((t,a)=>e.jsx("button",{onClick:()=>n(a),className:`pointer-events-auto transition-all ${a===o?"w-2 h-2 bg-[#2e2c6a] rounded-full":"w-2 h-2 bg-[#2e2c6a]/40 rounded-full hover:bg-[#2e2c6a]/60"}`,"aria-label":`Go to recommendation ${a+1}`},a))}),e.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-[540px] flex items-center justify-center gap-4 z-30",children:[e.jsx("button",{onClick:oe,className:"px-4 py-2 bg-[#2e2c6a] text-white text-sm font-semibold rounded-lg hover:bg-[#3a3878] transition-colors whitespace-nowrap",children:l.restart}),e.jsx("button",{type:"button","aria-label":"reload-recommendations",className:"size-8 flex items-center justify-center rounded-full bg-white/0",onClick:ie,children:e.jsx("img",{src:Fe,alt:"reload",className:"w-[28px] h-[28px]"})}),r.length>0&&r[o]&&e.jsx("button",{type:"button","aria-label":"not-interested",className:"size-8 flex items-center justify-center rounded-full bg-white/0",onClick:()=>{const t=r[o];t!=null&&t.id&&me(t.id)},children:e.jsx("img",{src:F.has(((K=r[o])==null?void 0:K.id)||"")?Ie:$e,alt:F.has(((q=r[o])==null?void 0:q.id)||"")?l.notInterestedCancel:l.notInterested,className:"w-[28px] h-[28px]"})})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-30 pt-4 pb-2 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Pe,{})})})]})}export{Je as default};
